<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ™ºèƒ½å¤©æ°”å‡ºè¡ŒåŠ©æ‰‹</title>
  <style>
    body {
      font-family: "Microsoft YaHei", sans-serif;
      margin: 0;
      padding: 0;
      background-image: url('./asset/rem.png');
      /* background-size: auto; */
      background-size: cover;
      background-position: center;
      transition: background-image 1s ease-in-out;
      color: #fff;
    }

    header {
      background: rgba(0, 0, 0, 0.5);
      text-align: center;
      padding: 1em;
      position: relative;
    }

    header h1 {
      margin: 0;
      font-size: 1.8em;
    }

    .settings-btn {
      position: absolute;
      right: 20px;
      top: 20px;
      background: transparent;
      border: none;
      font-size: 1.2em;
      color: #fff;
      cursor: pointer;
    }

    main {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      padding: 20px;
    }

    .query-section, .result-section, .chat-section {
      background: rgba(0, 0, 0, 0.5);
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 600px;
    }

    .form-box {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    input, button {
      padding: 10px;
      border: none;
      border-radius: 5px;
    }

    input {
      flex: 1;
    }

    button {
      background-color: #007bff;
      color: #fff;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #0056b3;
    }

    .weather-card, .suggestion-card {
      margin-top: 15px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 10px;
      padding: 15px;
    }

    .chat-box {
      background: rgba(255, 255, 255, 0.15);
      height: 200px;
      overflow-y: auto;
      border-radius: 10px;
      padding: 10px;
    }

    footer {
      text-align: center;
      padding: 10px;
      background: rgba(0, 0, 0, 0.5);
    }
  </style>
</head>
<body>
  <header>
    <h1>æ™ºèƒ½å¤©æ°”å‡ºè¡ŒåŠ©æ‰‹</h1>
  </header>

  <main>
    <section class="query-section">
      <h2>æŸ¥è¯¢å¤©æ°”</h2>
      <div class="form-box">
        <input type="text" id="city-input" placeholder="è¾“å…¥åŸå¸‚ï¼Œå¦‚ï¼šç¦å·å¸‚ / å¦é—¨å¸‚ / åŒ—äº¬å¸‚" />
        <input type="date" id="date-input" />
        <button id="search-btn">æŸ¥çœ‹å¤©æ°”</button>
      </div>
    </section>

    <section class="result-section">
      <div class="weather-card">
        <h3>ğŸŒ¦ å½“å‰å¤©æ°”</h3>
        <p><strong>åŸå¸‚ï¼š</strong><span id="city-name">â€”â€”</span></p>
        <p><strong>æ—¥æœŸï¼š</strong><span id="date-info">â€”â€”</span></p>
        <p><strong>æ¸©åº¦ï¼š</strong><span id="temp">â€”â€”</span>Â°C</p>
        <p><strong>æ¹¿åº¦ï¼š</strong><span id="humidity">â€”â€”</span>%</p>
        <p><strong>é£é€Ÿï¼š</strong><span id="wind">â€”â€”</span> m/s</p>
        <p><strong>å¤©æ°”çŠ¶å†µï¼š</strong><span id="condition">â€”â€”</span></p>
      </div>

      <div class="suggestion-card">
        <h3>ğŸ§­ å‡ºè¡Œå»ºè®®</h3>
        <p id="suggestion">è¯·å…ˆè¾“å…¥åŸå¸‚å’Œæ—¥æœŸæŸ¥è¯¢å¤©æ°”ã€‚</p>
      </div>
    </section>

    <section class="chat-section">
      <h3>ğŸ’¬ å¯¹è¯è®°å½•</h3>
      <div class="chat-box" id="chat-box">
        <p><em>ç³»ç»Ÿï¼š</em>ä½ å¥½ï¼è¯·è¾“å…¥åŸå¸‚å’Œæ—¥æœŸè¿›è¡ŒæŸ¥è¯¢ â˜€ï¸</p>
      </div>
    </section>
  </main>

 

  <script>
    const searchBtn = document.getElementById("search-btn");
    const cityInput = document.getElementById("city-input");
    const dateInput = document.getElementById("date-input");
    const chatBox = document.getElementById("chat-box");

    const cityNameSpan = document.getElementById("city-name");
    const dateSpan = document.getElementById("date-info");
    const tempSpan = document.getElementById("temp");
    const humiditySpan = document.getElementById("humidity");
    const windSpan = document.getElementById("wind");
    const conditionSpan = document.getElementById("condition");
    const suggestionP = document.getElementById("suggestion");

    // èƒŒæ™¯å›¾æ˜ å°„è¡¨
    const weatherBackgrounds = {
      "æ™´": "url('./asset/sunny.jpg')",
      "å¤šäº‘": "url('./asset/cloudy.jpg')",
      "é˜´": "url('./asset/cloudy1.jpg')",
      "é›¨": "url('./asset/rainy.jpg')",
      "é›ª": "url('./asset/snowy.jpg')"
    };

    // ç‚¹å‡»â€œæŸ¥çœ‹å¤©æ°”â€æŒ‰é’®
    searchBtn.addEventListener("click", () => {
      const city = cityInput.value.trim();
      const date = dateInput.value;

      // å®šä¹‰ä¸‰ç»„ç¤ºä¾‹æ•°æ®
      const weatherDataList = [
        {
          city: "ç¦å·å¸‚",
          date: "2025-10-22",
          temperature: 26,
          humidity: 68,
          wind: 3,
          condition: "å¤šäº‘è½¬æ™´",
          suggestion: "å¤©æ°”èˆ’é€‚ï¼Œé€‚åˆå‡ºè¡Œï¼Œä½†æ—©æ™šç•¥å‡‰ï¼Œå»ºè®®å¸¦è–„å¤–å¥—ã€‚"
        },
        {
          city: "å¦é—¨å¸‚",
          date: "2025-10-21",
          temperature: 32,
          humidity: 68,
          wind: 3,
          condition: "æ™´",
          suggestion: "å¤©æ°”ç‚çƒ­ï¼Œå‡ºè¡Œæ³¨æ„é˜²æ™’ã€‚"
        },
        {
          city: "åŒ—äº¬å¸‚",
          date: "2025-10-23",
          temperature: 22,
          humidity: 67,
          wind: 3,
          condition: "é›¨",
          suggestion: "æ°”æ¸©é€‚ä¸­ï¼Œå»ºè®®è½»ä¾¿å¤–å‡ºï¼Œæ³¨æ„æ—©æ™šæ¸©å·®ã€‚"
        }
      ];

      // æŸ¥æ‰¾åŒ¹é…é¡¹
      const weatherData = weatherDataList.find(
        (item) => item.city === city && item.date === date
      );

      if (!weatherData) {
        alert("æœªæ‰¾åˆ°è¯¥åŸå¸‚æˆ–æ—¥æœŸçš„å¤©æ°”æ•°æ®ï¼Œè¯·è¾“å…¥æ­£ç¡®çš„åŸå¸‚ä¸æ—¥æœŸ");
        addChat("ç³»ç»Ÿ", "æš‚æ— è¯¥åŸå¸‚/æ—¥æœŸçš„å¤©æ°”æ•°æ®ã€‚");
        return;
      }

      // æ›´æ–°å¤©æ°”ä¿¡æ¯
      cityNameSpan.textContent = weatherData.city;
      dateSpan.textContent = weatherData.date;
      tempSpan.textContent = weatherData.temperature;
      humiditySpan.textContent = weatherData.humidity;
      windSpan.textContent = weatherData.wind;
      conditionSpan.textContent = weatherData.condition;
      suggestionP.textContent = weatherData.suggestion;

      // èŠå¤©è®°å½•
      addChat("ç”¨æˆ·", `æŸ¥è¯¢ ${city} ${date} çš„å¤©æ°”`);
      addChat("ç³»ç»Ÿ", `${weatherData.city}ï¼ˆ${weatherData.date}ï¼‰å¤©æ°”ï¼š${weatherData.condition}ï¼Œæ¸©åº¦ ${weatherData.temperature}Â°Cã€‚${weatherData.suggestion}`);

      // ä¿®æ”¹èƒŒæ™¯
      changeBackground(weatherData.condition);
    });

    // èŠå¤©è®°å½•å‡½æ•°
    function addChat(sender, message) {
      const p = document.createElement("p");
      p.innerHTML = `<strong>${sender}ï¼š</strong> ${message}`;
      chatBox.appendChild(p);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // èƒŒæ™¯åˆ‡æ¢å‡½æ•°
    function changeBackground(condition) {
    let normalized = condition.replace(/å¤©|è½¬/g, "").trim(); // å»é™¤å¤šä½™å­—ç¬¦å¹¶ä¿®å‰ªç©ºæ ¼
    let matchedKey;

    switch (normalized) {
        case "æ™´": matchedKey = "æ™´"; break;
        case "å¤šäº‘": matchedKey = "å¤šäº‘"; break;
        case "é˜´": matchedKey = "é˜´"; break;
        case "é›¨": matchedKey = "é›¨"; break;
        case "é›ª": matchedKey = "é›ª"; break;
    }

    const bgUrl = weatherBackgrounds[matchedKey];
    if (bgUrl) {
        document.body.style.backgroundImage = bgUrl;
    } else {
        console.warn(`æœªæ‰¾åˆ°å¯¹åº”èƒŒæ™¯å›¾: ${matchedKey}`); // è°ƒè¯•ç”¨
        document.body.style.backgroundImage = weatherBackgrounds["å¤šäº‘"]; // ç¡®ä¿æ€»æœ‰å›¾å¯æ˜¾ç¤º
    }
}
  </script>
</body>
</html>